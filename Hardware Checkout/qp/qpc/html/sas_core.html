<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: Core Classes in QP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="ql-preview.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="ql-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.png"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">7.2.1</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sas_core.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Core Classes in QP </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><span class="prev_button"><a class="el" href="sas.html">Architecture (SAS)</a></span><span class="next_button"><a class="el" href="sds.html">Design (SDS)</a></span> </p>
<h1><a class="anchor" id="sas_main"></a>
Architecture Items</h1>
<p>The following class diagram shows the main classes comprising the QP Framework and their relation to the application-level code, such as the <a class="el" href="tut_game.html">Flyn 'n' Shoot game</a> example application (shown at the bottom 1/3 of the diagram).</p>
<p><a class="anchor" id="sas_fig210"></a></p><div class="image">
<img src="sas_classes.png" alt=""/>
</div>
  <div class="caption"><center><b>Figure 210: Main Classes in the QP Framework</b></center></div><p><br  />
 <a id="a47_AQP210" name="a47_AQP210"></a> </p><hr  />
<h2><a class="anchor" id="AQP210"></a>
AQP210</h2>
<p><a class="el" href="struct_q_evt.html" title="Event class.">QEvt</a> class</p>
<dl class="section user"><dt>Amplification</dt><dd>The <a class="el" href="struct_q_evt.html" title="Event class.">QEvt</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[0]) represents events without parameters and serves as the base class for derivation of events with parameters as well as <a class="el" href="sas_core.html#AQP215">time events</a>. For example, application-level events <code>ObjectPosEvt</code> and <code>ObjectImageEvt</code> (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[8]) inherit <a class="el" href="struct_q_evt.html" title="Event class.">QEvt</a> and add to it some parameters.</dd></dl>
<dl class="section user"><dt>Traceability</dt><dd><a class="el" href="srs_evt.html#RQP003">RQP003</a> <a class="el" href="srs_sm.html#RQP103">RQP103</a></dd></dl>
<p><a id="a48_AQP211" name="a48_AQP211"></a> </p><hr  />
<h2><a class="anchor" id="AQP211"></a>
AQP211</h2>
<p><a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> abstract class</p>
<dl class="section user"><dt>Amplification</dt><dd>The abstract <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[1]) represents a Hierarchical State Machine (HSM) with full support for hierarchical nesting of states, entry/exit actions, initial transitions, and transitions to history in any composite state. This class is designed for ease of manual coding of HSMs in C, but it is also supported by the <a href="https://www.state-machine.com/qm" class="extern" target="_blank">QM modeling tool</a>. <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> is also the base class for the <a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a> state machine, which provides a superior efficiency, but requires the use of the <a href="https://www.state-machine.com/qm" class="extern" target="_blank">QM modeling tool</a> to generate code.</dd></dl>
<dl class="section user"><dt>Traceability</dt><dd><a class="el" href="srs_sm.html#RQP101">RQP101</a> <a class="el" href="srs_sm.html#RQP102">RQP102</a> <a class="el" href="srs_sm.html#RQP103">RQP103</a> <a class="el" href="srs_sm.html#RQP120">RQP120</a></dd></dl>
<p><a id="a49_AQP212" name="a49_AQP212"></a> </p><hr  />
<h2><a class="anchor" id="AQP212"></a>
AQP212</h2>
<p><a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a> abstract class</p>
<dl class="section user"><dt>Amplification</dt><dd>The abstract <a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[2]) represents an active object that uses the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> style implementation strategy for state machines. This strategy is tailored to manual coding, but it is also supported by the <a href="https://www.state-machine.com/qm" class="extern" target="_blank">QM modeling tool</a>. The resulting code is slower than in the <a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a>-style implementation strategy. The game application provides an example of application-level classes deriving from <a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a> and <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> (see <a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[6] and <a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[7]).</dd></dl>
<p><a id="a50_AQP213" name="a50_AQP213"></a> </p><hr  />
<h2><a class="anchor" id="AQP213"></a>
AQP213</h2>
<p><a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a> abstract class</p>
<dl class="section user"><dt>Amplification</dt><dd>The abstract <a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[3], QM State Machine) derives from <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> and implements the fastest and the most efficient strategy for coding hierarchical state machines, but this strategy is not human-maintainable and requires the use of the <a href="https://www.state-machine.com/qm" class="extern" target="_blank">QM modeling tool</a>. The class is abstract, meaning that it is not designed to be instantiated directly, but rather only for inheritance.</dd></dl>
<dl class="section user"><dt>Traceability</dt><dd><a class="el" href="srs_sm.html#RQP104">RQP104</a> <a class="el" href="srs_sm.html#RQP120">RQP120</a> <a class="el" href="srs_sm.html#RQP130">RQP130</a></dd></dl>
<p><a id="a51_AQP214" name="a51_AQP214"></a> </p><hr  />
<h2><a class="anchor" id="AQP214"></a>
AQP214</h2>
<p><a class="el" href="struct_q_m_active.html" title="Active object class (based on QMsm implementation strategy)">QMActive</a> abstract class</p>
<dl class="section user"><dt>Amplification</dt><dd>The abstract <a class="el" href="struct_q_m_active.html" title="Active object class (based on QMsm implementation strategy)">QMActive</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[4]) represents an active object that uses the <a class="el" href="struct_q_msm.html" title="QM state machine implementation strategy.">QMsm</a> state machine implementation strategy. This strategy requires the use of the QM modeling tool to generate state machine code automatically, but the code is faster than in the <a class="el" href="struct_q_hsm.html" title="Hierarchical State Machine class.">QHsm</a> style implementation strategy and needs less run-time support (smaller event-processor).</dd></dl>
<p><a id="a52_AQP215" name="a52_AQP215"></a> </p><hr  />
<h2><a class="anchor" id="AQP215"></a>
AQP215</h2>
<p><a class="el" href="struct_q_time_evt.html" title="Time Event class.">QTimeEvt</a> class</p>
<dl class="section user"><dt>Amplification</dt><dd>The <a class="el" href="struct_q_time_evt.html" title="Time Event class.">QTimeEvt</a> class (<a class="el" href="sas_core.html#sas_fig210">Figure 210</a>[5]) represents time events in QP. <b>Time events</b> are special QP events equipped with the notion of time passage. The basic usage model of the time events is as follows. An active object allocates one or more <a class="el" href="struct_q_time_evt.html" title="Time Event class.">QTimeEvt</a> objects (provides the storage for them). When the active object needs to arrange for a timeout, it arms one of its time events to fire either just once (one-shot) or periodically. Each time event times out independently from the others, so a QP application can make multiple parallel timeout requests (from the same or different active objects). When QP detects that the appropriate moment has arrived, it inserts the time event directly into the recipient's event queue. The recipient then processes the time event just like any other event.</dd></dl>
<h1><a class="anchor" id="qxk_classes"></a>
Classes in QXK</h1>
<p>The figure below shows the main classes introduced in the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel and their relation to the classes of the QP framework.</p>
<div class="image">
<img src="qxk_classes.png" alt=""/>
<div class="caption">
Classes of the QXK dual-mode kernel</div></div>
 <p><code>[0]</code> The abstract <a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a> class represents active objects in QP. This class contains the <code>thread</code> object of the underlying kernel (<a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> thread-control-block in this case) as well as the event queue and the unique priority of the active object.</p>
<p><code>[1]</code> The <a class="el" href="struct_q_x_thread.html" title="eXtended (blocking) thread of the QXK preemptive kernel">QXThread</a> class represents the extended (blocking) threads of the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel. It inherits <a class="el" href="struct_q_active.html" title="Active object class (based on the QHsm implementation strategy)">QActive</a>, so that extended-threads can be treated as active objects internally in the framework. However, the extended-threads <b>do not implement state machines</b>. Instead, the data fields used for storing the current state in active objects are re-used to store the private stack of the extended-thread. The <a class="el" href="struct_q_x_thread.html" title="eXtended (blocking) thread of the QXK preemptive kernel">QXThread</a> class also contains the <code>timeEvt</code> object (see <a class="el" href="struct_q_time_evt.html" title="Time Event class.">QTimeEvt</a>) for generating timeouts when the extended-thread is blocked.</p>
<p><code>[2]</code> The <a class="el" href="struct_q_x_mutex.html" title="Blocking Mutex the QXK preemptive kernel.">QXMutex</a> class represents the <b>priority-ceiling mutex</b> of the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel. The mutex can block and can be used only in the extended-threads (in case they share resources that need to be protected). The mutex is recursive, meaning that it can be locked multiple times from the same extended thread (but it needs to be unlocked equal number of times).</p>
<p><code>[3]</code> The <a class="el" href="struct_q_x_semaphore.html" title="Counting Semaphore of the QXK preemptive kernel.">QXSemaphore</a> class represents the <b>counting semaphore</b> of the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel. The semaphore can be waited on only in the extended-threads and the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel would assert if an active object thread would attempt to wait on a semaphore. On the other hand, a semaphore can be signaled from anywhere in the code, including active objects and ISRs.</p>
<dl class="section note"><dt>Note</dt><dd>The main takeaway from the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> class diagram is <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a>'s <b>optimal, tight integration</b> with the QP framework. The <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> kernel reuses all mechanisms already provided in QP, thus avoiding any code duplication, inefficient layers of indirection, and additional licensing costs, which are inevitable when using <a class="el" href="ports_rtos.html">3rd-party RTOS kernels</a> to run QP applications.</dd></dl>
<p><span class="prev_button"><a class="el" href="sas.html">Architecture (SAS)</a></span><span class="next_button"><a class="el" href="sds.html">Design (SDS)</a></span>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="sas.html">Architecture (SAS)</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
