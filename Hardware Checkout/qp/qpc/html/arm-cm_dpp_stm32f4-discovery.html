<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C: DPP on STM32F4-Discovery</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="ql-preview.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="ql-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.png"/></a>
  </div>
   <div id="projectname">
    QP/C
    &nbsp;<span id="projectnumber">7.2.1</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('arm-cm_dpp_stm32f4-discovery.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">DPP on STM32F4-Discovery </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The DPP example for STM32F4-Discovery board is located directory <span class="img folder">examples/arm-cm/dpp_stm32f4-discovery</span>.</p>
<div class="image">
<img src="bd_STM32F4-Disco.jpg" alt=""/>
</div>
  <div class="caption"><center><b>STM32F4-Discovery</b></center></div><p>Demonstrated built-in kernels:</p><ul>
<li>cooperative <a class="el" href="srs_qv.html">Cooperative Run-to-Completion Kernel</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
<li>preemptive, run-to-completion <a class="el" href="srs_qk.html">Preemptive Run-to-Completion Kernel</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
<li>dual-mode (run-to-completion/blocking) <a class="el" href="srs_qxk.html">Preemptive Dual-Mode Kernel</a> with ARM-Keil, GNU-ARM, and IAR-ARM toolchains</li>
</ul>
<p>Features:</p><ul>
<li>multiple active objects, including 5 instances of the same AO class (Philo)</li>
<li>extended threads (the <a class="el" href="struct_q_x_k.html" title="The QXK kernel class.">QXK</a> version)</li>
<li><a href="https://www.state-machine.com/qtools/qpspy.html">QP/Spy software tracing</a> using the virtual COM-port</li>
<li>bi-directional <a href="https://www.state-machine.com/qtools/qs.html#qs_rx">QP/Spy</a> (sending commands to the target)</li>
</ul>
<p>After you load the DPP example into the STM32F4-Discovery board, the application should start blinking the 4 on-board LEDs. You can press the User button (blue) to PAUSE the philosophers for as long as the button is depressed. The philosophers resume dining when you release the User button. (In the PAUSED state the Table active object stops granting permissions to eat, so eventually all philosophers end in the "hungry" state.)</p>
<h1><a class="anchor" id="arm-cm_dpp_stm32f4-discovery_qs"></a>
QS Software Tracing</h1>
<p>The DPP example for embOS on STM32F4-Discovery board provides the "Spy" build configuration, which outputs the QS (Quantum Spy) software tracing data through USART2. To get the data out of the board, you need to connect the TTL/RS232 converter as follows:</p>
<center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">STM32F4-Discovery   </th><th class="markdownTableHeadLeft">TTL/RS232 Converter    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PA2   </td><td class="markdownTableBodyLeft">TX    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PA3   </td><td class="markdownTableBodyLeft">RX (currently not used)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VDD   </td><td class="markdownTableBodyLeft">VCC    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GND   </td><td class="markdownTableBodyLeft">GND   </td></tr>
</table>
</center><div class="image">
<img src="bd_STM32F4-Disco_RS232.jpg" alt=""/>
</div>
  <div class="caption"><center><b>STM32F4-Discovery board connected to RS232 level shifter</b></center></div><p>The output is generated at 115200 baud rate.</p>
<p>Here is an example invocation of the QSPY host application to receive the QS data from STM32F4-Discovery:</p>
<pre class="fragment">qspy -cCOM1
</pre><p>The actual COM port number might be different on your Windows machine. Please check the Device Manager to find the COM port number.</p>
<p><span class="next_button"><a class="el" href="arm-cm_dpp_nucleo-l552ze.html">DPP on STM32 NUCLEO-L552ZE Q</a></span>  </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="exa.html">Examples</a></li><li class="navelem"><a class="el" href="exa_native.html">Native Examples (Built-in Kernels)</a></li><li class="navelem"><a class="el" href="exa_arm-cm.html">ARM Cortex-M (Cortex-M0/M0+/M3/M4/M7/M33)</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
