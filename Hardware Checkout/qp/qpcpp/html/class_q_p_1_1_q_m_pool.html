<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QP/C++: QMPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="ql-preview.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="ql-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <div id="projectlogo">
    <a href="https://www.state-machine.com" title="Quantum Leaps"><img alt="Logo" src="logo_ql.png"/></a>
  </div>
   <div id="projectname">
    QP/C++
    &nbsp;<span id="projectnumber">7.2.1</span>
   </div>
   <div id="projectbrief">Real-Time Embedded Framework</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_q_p_1_1_q_m_pool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_q_p_1_1_q_m_pool-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">QMPool Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Native <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> memory pool class.
 <a href="class_q_p_1_1_q_m_pool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abf021e9b8531082360d9fa38427107a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#abf021e9b8531082360d9fa38427107a3">QMPool</a> ()</td></tr>
<tr class="memdesc:abf021e9b8531082360d9fa38427107a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">public default constructor  <br /></td></tr>
<tr class="separator:abf021e9b8531082360d9fa38427107a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c9795bf9d76d4a6c30c2e341c182dfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a5c9795bf9d76d4a6c30c2e341c182dfa">init</a> (void *const poolSto, std::uint_fast32_t poolSize, std::uint_fast16_t blockSize) noexcept</td></tr>
<tr class="memdesc:a5c9795bf9d76d4a6c30c2e341c182dfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the native <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> event pool.  <br /></td></tr>
<tr class="separator:a5c9795bf9d76d4a6c30c2e341c182dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c87743569aa2a26a2b5d7fbbef9d42"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a84c87743569aa2a26a2b5d7fbbef9d42">get</a> (std::uint_fast16_t const margin, std::uint_fast8_t const qs_id) noexcept</td></tr>
<tr class="memdesc:a84c87743569aa2a26a2b5d7fbbef9d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a memory block from a memory pool.  <br /></td></tr>
<tr class="separator:a84c87743569aa2a26a2b5d7fbbef9d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eefaa351313ea39462395eb58a584eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a1eefaa351313ea39462395eb58a584eb">put</a> (void *const b, std::uint_fast8_t const qs_id) noexcept</td></tr>
<tr class="memdesc:a1eefaa351313ea39462395eb58a584eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a memory block back to a memory pool.  <br /></td></tr>
<tr class="separator:a1eefaa351313ea39462395eb58a584eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae225d280c17a4c9a611ad8c18cc28cf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a1c27807bce3dae6017ad20eb0c80fd7d">QMPoolSize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#ae225d280c17a4c9a611ad8c18cc28cf9">getBlockSize</a> () const noexcept</td></tr>
<tr class="memdesc:ae225d280c17a4c9a611ad8c18cc28cf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the fixed block-size of the blocks managed by this pool  <br /></td></tr>
<tr class="separator:ae225d280c17a4c9a611ad8c18cc28cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1a9747f16018a7befbc30b5beb94a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#ace1a9747f16018a7befbc30b5beb94a9">getNMin</a> () const noexcept</td></tr>
<tr class="memdesc:ace1a9747f16018a7befbc30b5beb94a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory pool operation for obtaining the minimum number of free blocks ever in the pool (a.k.a.  <br /></td></tr>
<tr class="separator:ace1a9747f16018a7befbc30b5beb94a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34be0d846fb6220df967ec2725616ad8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a34be0d846fb6220df967ec2725616ad8">getNFree</a> () const noexcept</td></tr>
<tr class="memdesc:a34be0d846fb6220df967ec2725616ad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory pool operation for obtaining the current number of free blocks in the pool.  <br /></td></tr>
<tr class="separator:a34be0d846fb6220df967ec2725616ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aecc842d99d751001f6f1c4e8824a0e35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#aecc842d99d751001f6f1c4e8824a0e35">QMPool</a> (<a class="el" href="class_q_p_1_1_q_e_queue.html">QEQueue</a> const &amp;other)=delete</td></tr>
<tr class="memdesc:aecc842d99d751001f6f1c4e8824a0e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">disallow copying of <a class="el" href="class_q_p_1_1_q_m_pool.html" title="Native QF memory pool class.">QP::QMPool</a>  <br /></td></tr>
<tr class="separator:aecc842d99d751001f6f1c4e8824a0e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87d75018fa66d4a8811bc380f902d9ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a87d75018fa66d4a8811bc380f902d9ce">operator=</a> (<a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> const &amp;other)=delete</td></tr>
<tr class="memdesc:a87d75018fa66d4a8811bc380f902d9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">disallow copying of <a class="el" href="class_q_p_1_1_q_m_pool.html" title="Native QF memory pool class.">QP::QMPool</a>  <br /></td></tr>
<tr class="separator:a87d75018fa66d4a8811bc380f902d9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7553216ed6a41cbc8499e51eb89138df"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a7553216ed6a41cbc8499e51eb89138df">m_start</a></td></tr>
<tr class="memdesc:a7553216ed6a41cbc8499e51eb89138df"><td class="mdescLeft">&#160;</td><td class="mdescRight">start of the memory managed by this memory pool  <br /></td></tr>
<tr class="separator:a7553216ed6a41cbc8499e51eb89138df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e76fcd2bb332f548826d4e478b0a96"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a21e76fcd2bb332f548826d4e478b0a96">m_end</a></td></tr>
<tr class="memdesc:a21e76fcd2bb332f548826d4e478b0a96"><td class="mdescLeft">&#160;</td><td class="mdescRight">end of the memory managed by this memory pool  <br /></td></tr>
<tr class="separator:a21e76fcd2bb332f548826d4e478b0a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b771d161e49fb1fa5efb073959337a"><td class="memItemLeft" align="right" valign="top">void *volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a74b771d161e49fb1fa5efb073959337a">m_free_head</a></td></tr>
<tr class="memdesc:a74b771d161e49fb1fa5efb073959337a"><td class="mdescLeft">&#160;</td><td class="mdescRight">head of linked list of free blocks  <br /></td></tr>
<tr class="separator:a74b771d161e49fb1fa5efb073959337a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65aa6d0df94c23aef529b228f1bf2496"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a1c27807bce3dae6017ad20eb0c80fd7d">QMPoolSize</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a65aa6d0df94c23aef529b228f1bf2496">m_blockSize</a></td></tr>
<tr class="memdesc:a65aa6d0df94c23aef529b228f1bf2496"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum block size (in bytes)  <br /></td></tr>
<tr class="separator:a65aa6d0df94c23aef529b228f1bf2496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76fcde550b26afa7d2bece62f20cc6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#ad76fcde550b26afa7d2bece62f20cc6e">m_nTot</a></td></tr>
<tr class="memdesc:ad76fcde550b26afa7d2bece62f20cc6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of blocks  <br /></td></tr>
<tr class="separator:ad76fcde550b26afa7d2bece62f20cc6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aebf62285805211263399ee6919b299"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a9aebf62285805211263399ee6919b299">m_nFree</a></td></tr>
<tr class="memdesc:a9aebf62285805211263399ee6919b299"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of free blocks remaining  <br /></td></tr>
<tr class="separator:a9aebf62285805211263399ee6919b299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a89888e44c811f54d82856d5202beb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_p_1_1_q_m_pool.html#a94a89888e44c811f54d82856d5202beb">m_nMin</a></td></tr>
<tr class="memdesc:a94a89888e44c811f54d82856d5202beb"><td class="mdescLeft">&#160;</td><td class="mdescRight">minimum number of free blocks ever present in this pool  <br /></td></tr>
<tr class="separator:a94a89888e44c811f54d82856d5202beb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A fixed block-size memory pool is a very fast and efficient data structure for dynamic allocation of fixed block-size chunks of memory. A memory pool offers fast and deterministic allocation and recycling of memory blocks and is not subject to fragmenation.<br  />
<br  />
The <a class="el" href="class_q_p_1_1_q_m_pool.html" title="Native QF memory pool class.">QP::QMPool</a> class describes the native <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> memory pool, which can be used as the event pool for dynamic event allocation, or as a fast, deterministic fixed block-size heap for any other objects in your application.</p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="class_q_p_1_1_q_m_pool.html" title="Native QF memory pool class.">QP::QMPool</a> class contains only data members for managing a memory pool, but does not contain the pool storage, which must be provided externally during the pool initialization.</dd>
<dd>
The native <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> event pool is configured by defining the macro <a class="el" href="qk_8hpp.html#ab786be96ee118929bfb4dcd51d3acce5">QF_EPOOL_TYPE_</a> as <a class="el" href="class_q_p_1_1_q_m_pool.html" title="Native QF memory pool class.">QP::QMPool</a> in the specific <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> port header file. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00124">124</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abf021e9b8531082360d9fa38427107a3" name="abf021e9b8531082360d9fa38427107a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf021e9b8531082360d9fa38427107a3">&#9670;&#160;</a></span>QMPool() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qf__mem_8cpp_source.html#l00071">71</a> of file <a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a>.</p>

</div>
</div>
<a id="aecc842d99d751001f6f1c4e8824a0e35" name="aecc842d99d751001f6f1c4e8824a0e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecc842d99d751001f6f1c4e8824a0e35">&#9670;&#160;</a></span>QMPool() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_q_p_1_1_q_e_queue.html">QEQueue</a> const &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5c9795bf9d76d4a6c30c2e341c182dfa" name="a5c9795bf9d76d4a6c30c2e341c182dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c9795bf9d76d4a6c30c2e341c182dfa">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>poolSto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint_fast32_t&#160;</td>
          <td class="paramname"><em>poolSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint_fast16_t&#160;</td>
          <td class="paramname"><em>blockSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize a fixed block-size memory pool by providing it with the pool memory to manage, size of this memory, and the block size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">poolSto</td><td>pointer to the memory buffer for pool storage </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">poolSize</td><td>size of the storage buffer in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>fixed-size of the memory blocks in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>The caller of <a class="el" href="class_q_p_1_1_q_m_pool.html#a5c9795bf9d76d4a6c30c2e341c182dfa" title="Initializes the native QF event pool.">QMPool::init()</a> must make sure that the <code>poolSto</code> pointer is properly <b>aligned</b>. In particular, it must be possible to efficiently store a pointer at the location pointed to by <code>poolSto</code>. Internally, the <a class="el" href="class_q_p_1_1_q_m_pool.html#a5c9795bf9d76d4a6c30c2e341c182dfa" title="Initializes the native QF event pool.">QMPool::init()</a> function rounds up the block size <code>blockSize</code> so that it can fit an integer number of pointers. This is done to achieve proper alignment of the blocks within the pool.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Due to the rounding of block size the actual capacity of the pool might be less than (<code>poolSize</code> / <code>blockSize</code>). You can check the capacity of the pool by calling the <a class="el" href="namespace_q_p_1_1_q_f.html#a10a7c81ff3770d311e78876574dfd0f8" title="This function returns the minimum of free entries of the given event pool.">QF::getPoolMin()</a> function.</dd>
<dd>
This function is <b>not</b> protected by a critical section, because it is intended to be called only during the initialization of the system, when interrupts are not allowed yet.</dd>
<dd>
Many <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> ports use memory pools to implement the event pools. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The memory block must be valid and the poolSize must fit at least one free block and the blockSize must not be too close to the top of the dynamic range</dd></dl>

<p class="definition">Definition at line <a class="el" href="qf__mem_8cpp_source.html#l00082">82</a> of file <a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a>.</p>

</div>
</div>
<a id="a84c87743569aa2a26a2b5d7fbbef9d42" name="a84c87743569aa2a26a2b5d7fbbef9d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c87743569aa2a26a2b5d7fbbef9d42">&#9670;&#160;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * get </td>
          <td>(</td>
          <td class="paramtype">std::uint_fast16_t const&#160;</td>
          <td class="paramname"><em>margin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint_fast8_t const&#160;</td>
          <td class="paramname"><em>qs_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The function allocates a memory block from the pool and returns a pointer to the block back to the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">margin</td><td>the minimum number of unused blocks still available in the pool after the allocation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qs_id</td><td>QS-id of this state machine (for <a class="el" href="namespace_q_p_1_1_q_s.html" title="&quot;QP/Spy&quot; software tracing (target-resident components)">QS</a> local filter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a memory block or NULL if no more blocks are available in the memory pool.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function can be called from any task level or ISR level.</dd>
<dd>
The memory pool must be initialized before any events can be requested from it. Also, the <a class="el" href="class_q_p_1_1_q_m_pool.html#a84c87743569aa2a26a2b5d7fbbef9d42" title="Obtains a memory block from a memory pool.">QP::QMPool::get()</a> function uses internally a <a class="el" href="namespace_q_p_1_1_q_f.html" title="hierarchical event processor and active object framework">QF</a> critical section, so you should be careful not to call it from within a critical section when nesting of critical section is not supported.</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>An allocated block must be later returned back to the <b>same</b> pool from which it has been allocated.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_p_1_1_q_m_pool.html#a1eefaa351313ea39462395eb58a584eb" title="Returns a memory block back to a memory pool.">QP::QMPool::put()</a> </dd></dl>
<dl class="section invariant"><dt>Invariant</dt><dd>The pool is not empty, so the next free-block pointer, so the next free block must be in range.</dd></dl>
<p>PQP18_3</p>

<p class="definition">Definition at line <a class="el" href="qf__mem_8cpp_source.html#l00139">139</a> of file <a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a>.</p>

</div>
</div>
<a id="a1eefaa351313ea39462395eb58a584eb" name="a1eefaa351313ea39462395eb58a584eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eefaa351313ea39462395eb58a584eb">&#9670;&#160;</a></span>put()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void put </td>
          <td>(</td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint_fast8_t const&#160;</td>
          <td class="paramname"><em>qs_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Recycle a memory block to the fixed block-size memory pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>pointer to the memory block that is being recycled </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qs_id</td><td>QS-id of this state machine (for <a class="el" href="namespace_q_p_1_1_q_s.html" title="&quot;QP/Spy&quot; software tracing (target-resident components)">QS</a> local filter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>The recycled block must be allocated from the <b>same</b> memory pool to which it is returned.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function can be called from any task level or ISR level.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_p_1_1_q_m_pool.html#a84c87743569aa2a26a2b5d7fbbef9d42" title="Obtains a memory block from a memory pool.">QP::QMPool::get()</a> </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd># free blocks cannot exceed the total # blocks and the block pointer must be in range to come from this pool.</dd></dl>

<p class="definition">Definition at line <a class="el" href="qf__mem_8cpp_source.html#l00212">212</a> of file <a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a>.</p>

</div>
</div>
<a id="ae225d280c17a4c9a611ad8c18cc28cf9" name="ae225d280c17a4c9a611ad8c18cc28cf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae225d280c17a4c9a611ad8c18cc28cf9">&#9670;&#160;</a></span>getBlockSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a1c27807bce3dae6017ad20eb0c80fd7d">QMPoolSize</a> getBlockSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qf__mem_8cpp_source.html#l00240">240</a> of file <a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a>.</p>

</div>
</div>
<a id="ace1a9747f16018a7befbc30b5beb94a9" name="ace1a9747f16018a7befbc30b5beb94a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace1a9747f16018a7befbc30b5beb94a9">&#9670;&#160;</a></span>getNMin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> getNMin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>"low-watermark").</p>
<p>This operation needs to be used with caution because the "low-watermark" can change unexpectedly. The main intent for using this operation is to get an idea of pool usage to size the pool adequately.</p>
<dl class="section return"><dt>Returns</dt><dd>the minimum number of free entries ever in the memory pool since init. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00263">263</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a34be0d846fb6220df967ec2725616ad8" name="a34be0d846fb6220df967ec2725616ad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34be0d846fb6220df967ec2725616ad8">&#9670;&#160;</a></span>getNFree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> getNFree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This operation needs to be used with caution because the number of free blocks can change unexpectedly.</p>
<dl class="section return"><dt>Returns</dt><dd>the current number of free blocks in the memory pool. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00275">275</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a87d75018fa66d4a8811bc380f902d9ce" name="a87d75018fa66d4a8811bc380f902d9ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87d75018fa66d4a8811bc380f902d9ce">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> &amp; operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a> const &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7553216ed6a41cbc8499e51eb89138df" name="a7553216ed6a41cbc8499e51eb89138df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7553216ed6a41cbc8499e51eb89138df">&#9670;&#160;</a></span>m_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* m_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00128">128</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a21e76fcd2bb332f548826d4e478b0a96" name="a21e76fcd2bb332f548826d4e478b0a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e76fcd2bb332f548826d4e478b0a96">&#9670;&#160;</a></span>m_end</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* m_end</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00131">131</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a74b771d161e49fb1fa5efb073959337a" name="a74b771d161e49fb1fa5efb073959337a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74b771d161e49fb1fa5efb073959337a">&#9670;&#160;</a></span>m_free_head</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* volatile m_free_head</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00134">134</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a65aa6d0df94c23aef529b228f1bf2496" name="a65aa6d0df94c23aef529b228f1bf2496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65aa6d0df94c23aef529b228f1bf2496">&#9670;&#160;</a></span>m_blockSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a1c27807bce3dae6017ad20eb0c80fd7d">QMPoolSize</a> m_blockSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00137">137</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="ad76fcde550b26afa7d2bece62f20cc6e" name="ad76fcde550b26afa7d2bece62f20cc6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad76fcde550b26afa7d2bece62f20cc6e">&#9670;&#160;</a></span>m_nTot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> m_nTot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00140">140</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a9aebf62285805211263399ee6919b299" name="a9aebf62285805211263399ee6919b299"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9aebf62285805211263399ee6919b299">&#9670;&#160;</a></span>m_nFree</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> volatile m_nFree</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00143">143</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<a id="a94a89888e44c811f54d82856d5202beb" name="a94a89888e44c811f54d82856d5202beb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94a89888e44c811f54d82856d5202beb">&#9670;&#160;</a></span>m_nMin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_q_p.html#a236f78696c8edc05f25e7a0748c958e3">QMPoolCtr</a> m_nMin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>This attribute remembers the low watermark of the pool, which provides a valuable information for sizing event pools.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespace_q_p_1_1_q_f.html#a10a7c81ff3770d311e78876574dfd0f8" title="This function returns the minimum of free entries of the given event pool.">QF::getPoolMin()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="qmpool_8hpp_source.html#l00152">152</a> of file <a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="qmpool_8hpp_source.html">qmpool.hpp</a></li>
<li><a class="el" href="qf__mem_8cpp_source.html">qf_mem.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_q_p.html">QP</a></li><li class="navelem"><a class="el" href="class_q_p_1_1_q_m_pool.html">QMPool</a></li>
    <li class="footer">
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C++ 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
<hr class="footer"/><address class="footer"><small>
<a title="Quantum Leaps: Modern Embedded Software" href="https://www.state-machine.com">&copy; 2005-2023 Quantum Leaps</a> &nbsp;|&nbsp; <a title="help" href="help.html">Using Online Help</a> &nbsp;|&nbsp; <b>QP/C++ 7.2.1</b> &nbsp;|&nbsp; Updated on Sun Jan 15 2023
</small></address>
    </li>
  </ul>
</div>
</body>
</html>
